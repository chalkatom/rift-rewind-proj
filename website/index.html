<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rift Rewind</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<h1 class="title center-text">RIFT REWIND (pre-alpha)</h1>
  
<section class="league-lookup">
    <h3>League Data Lookup</h3>
    <p>Enter a summoner name to see their level and top champions!</p>
    
    <!-- Lookup message container for success/error messages -->
    <div id="lookup-message" class="lookup-message" style="display: none;"></div>
    
    <div class="lookup-form-container">
        <!-- Summoner lookup form -->
        <div class="form-group">
            <label for="summoner-name">Summoner Name</label>
            <input type="text" id="summoner-name" name="summoner-name" placeholder="Enter Riot ID" required>
        </div>
        <div class="form-group">
            <label for="region">Region</label>
            <select id="region" name="region">
                <option value="na1">North America</option>
                <option value="euw1">Europe West</option>
                <option value="eun1">Europe Nordic & East</option>
                <option value="kr">Korea</option>
                <option value="br1">Brazil</option>
                <option value="la1">Latin America North</option>
                <option value="la2">Latin America South</option>
                <option value="oc1">Oceania</option>
                <option value="tr1">Turkey</option>
                <option value="ru">Russia</option>
                <option value="jp1">Japan</option>
            </select>
        </div>
        <!-- Lookup submit button -->
        <button type="button" id="lookup-btn" class="lookup-submit-btn">Look Up Summoner</button>
    </div>

    <!-- Results display area -->
    <div id="summoner-results" class="summoner-results" style="display: none;">
        <h4>Summoner Info</h4>
        <div id="summoner-info"></div>
        <div id="champion-mastery"></div>
    </div>
</section>
  
<div class="carousel">
    <div class="card">
        <img src="../assets/champ-splashes/voliSplash.jpg" alt="Volibear">
        <div class="card-NameText title">VOLIBEAR</div>
        <div class="card-TagText">THE RELENTLESS STORM</div>
    </div>
    <div class="card">
        <img src="../assets/champ-splashes/gravesSplash.jpeg" alt="Graves">
        <div class="card-NameText title">GRAVES</div>
        <div class="card-TagText">THE OUTLAW</div>
    </div>
    <div class="card">
        <img src="../assets/champ-splashes/amumuSplash.jpg" alt="Amumu">
        <div class="card-NameText title">AMUMU</div>
        <div class="card-TagText">THE SAD MUMMY</div>
    </div>
    <div class="card">
        <img src="../assets/champ-splashes/viegoSplash.jpg" alt="Viego">
        <div class="card-NameText title">VIEGO</div>
        <div class="card-TagText">THE RUINED KING</div>
    </div>
    <div class="card">
        <img src="../assets/champ-splashes/udyrSplash.jpeg" alt="Udyr">
        <div class="card-NameText title">UDYR</div>
        <div class="card-TagText">THE SPIRIT WALKER</div>
    </div>
</div>
    <footer>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <img src="../assets/peacePoro.jpg" alt="Peace Poro">
        <p>&copy; 2025 Adam Chakour.</p>
    </footer>
    
    <script src="digits.js"></script>
    <script src="scroll.js"></script>

    <script>
    // League Data Lookup - Calls Riot API via Lambda
    const RIOT_API_URL = 'https://z5enc7mswajvaz6vf6tgtxmg6m0uwojn.lambda-url.us-east-2.on.aws/'; // Replace with your Function URL
    
    document.addEventListener('DOMContentLoaded', function() {
        const lookupBtn = document.getElementById('lookup-btn');
        const summonerNameInput = document.getElementById('summoner-name');
        const regionSelect = document.getElementById('region');
        
        lookupBtn.addEventListener('click', async function() {
            const summonerName = summonerNameInput.value.trim();
            const region = regionSelect.value;
            const messageDiv = document.getElementById('lookup-message');
            const resultsDiv = document.getElementById('summoner-results');
            
            if (!summonerName) {
                showMessage('Please enter a summoner name', 'error');
                return;
            }
            
            // Show loading state
            lookupBtn.textContent = 'Looking up...';
            lookupBtn.disabled = true;
            messageDiv.style.display = 'none';
            resultsDiv.style.display = 'none';
            
            try {
                const response = await fetch(RIOT_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        riotID: summonerName,
                        region: region
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    displaySummonerData(data);
                    showMessage('Summoner found!', 'success');
                } else {
                    showMessage(data.error || 'Failed to fetch summoner data', 'error');
                }
            } catch (error) {
                showMessage('Network error. Please try again.', 'error');
            }
            
            // Reset button
            lookupBtn.textContent = 'Look Up Summoner';
            lookupBtn.disabled = false;
        });
        
        // Enter key support
        summonerNameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                lookupBtn.click();
            }
        });
    });
    
    function displaySummonerData(data) {
        const resultsDiv = document.getElementById('summoner-results');
        const summonerInfo = document.getElementById('summoner-info');
        const championMastery = document.getElementById('champion-mastery');
        
        // Display summoner info
        summonerInfo.innerHTML = `
            <div class="summoner-card">
                <h5>${data.summoner.name}</h5>
                <p>Level: ${data.summoner.level}</p>
            </div>
        `;
        
        // Display top champions
        if (data.topChamps && data.topChamps.length > 0) {
            const championsHtml = data.topChamps.map(champ => `
                <div class="champion-card">
                    <p><strong>Champion:</strong> ${champ.champion.toUpperCase()}</p>
                    <p><strong>Title:</strong> ${champ.title.toUpperCase()}</p>
                    <p><strong>Games Played:</strong> ${champ.games_played}</p>
                    <p><strong>Win Rate</strong> ${champ.win_rate}%</p>
                </div>
            `).join('');
            
            championMastery.innerHTML = `
                <h5>Top Champions</h5>
                <div class="champions-grid">
                    ${championsHtml}
                </div>
            `;
        } else {
            championMastery.innerHTML = '<p>No champion data found.</p>';
        }
        
        resultsDiv.style.display = 'block';
    }
    
    function showMessage(text, type) {
        const messageDiv = document.getElementById('lookup-message');
        messageDiv.textContent = text;
        messageDiv.className = `lookup-message ${type}`;
        messageDiv.style.display = 'block';
        
        // Auto-hide after 10 seconds
        setTimeout(() => {
            messageDiv.style.display = 'none';
        }, 10000);
    }
</script>

</body>
</html>
